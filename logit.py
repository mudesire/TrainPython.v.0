# Autogenerated with SMOP 
from smop.core import *
# Trainmatlab.v.0/logit.m

    
@function
def logit(logmsg=None,whereto=None,parent_flag=None,*args,**kwargs):
    varargin = logit.varargin
    nargin = logit.nargin

    #LOGIT write message to log file and/or stdout
#   [RC]=LOGIT(LOGMSG,LEVEL)
#   LEVEL = 0 (default) writes to stamps.log and stdout
#   LEVEL = 1 writes to stamps.log only
#   LEVEL = 2 writes to stdout only
#   LEVEL = 3 writes to debug.log only
#   LEVEL = FILENAME writes to FILENAME and stdout
#   PARENT_FLAG = 0 (default) writes to current directory
#   PARENT_FLAG = 1 writes to parent directory
    
    #     Copyright (C) 2015 
#     Email: eedpsb@leeds.ac.uk or davidbekaert.com
#     With permission from Andy Hooper
    
    #     This program is free software; you can redistribute it and/or modify
#     it under the terms of the GNU General Public License as published by
#     the Free Software Foundation; either version 2 of the License, or
#     (at your option) any later version.
# 
#     This program is distributed in the hope that it will be useful,
#     but WITHOUT ANY WARRANTY; without even the implied warranty of
#     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#     GNU General Public License for more details.
# 
#     You should have received a copy of the GNU General Public License along
#     with this program; if not, write to the Free Software Foundation, Inc.,
#     51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
    
    # By Andy Hooper, March 2010
    
    #   ================================================================
#   11/2012 AH: Add option to specify log filename
#   ================================================================
    
    fstack=dbstack
# Trainmatlab.v.0/logit.m:36
    if size(fstack,1) > 1:
        fname=upper(fstack[2].name)
# Trainmatlab.v.0/logit.m:38
    else:
        fname='Command line'
# Trainmatlab.v.0/logit.m:40
    
    if nargin < 1:
        logmsg=0
# Trainmatlab.v.0/logit.m:44
    
    if nargin < 2:
        whereto=0
# Trainmatlab.v.0/logit.m:48
    
    if nargin < 3:
        parent_flag=0
# Trainmatlab.v.0/logit.m:52
    
    if isnumeric(logmsg):
        if 0 == logmsg:
            logmsg='Starting'
# Trainmatlab.v.0/logit.m:58
        else:
            if 1 == logmsg:
                logmsg='Finished'
# Trainmatlab.v.0/logit.m:60
    
    if strcmp(logmsg[end() - 1:end()],'\\n'):
        logmsg=logmsg[1:end() - 2]
# Trainmatlab.v.0/logit.m:65
    
    if logical_not(isnumeric(whereto)):
        logfile=copy(whereto)
# Trainmatlab.v.0/logit.m:69
        whereto=0
# Trainmatlab.v.0/logit.m:70
    else:
        logfile='STAMPS.log'
# Trainmatlab.v.0/logit.m:72
    
    debugfile='DEBUG.log'
# Trainmatlab.v.0/logit.m:75
    if parent_flag == 1:
        logfile=matlabarray(cat('../',logfile))
# Trainmatlab.v.0/logit.m:77
        debugfile=matlabarray(cat('../',debugfile))
# Trainmatlab.v.0/logit.m:78
    
    if whereto < 2:
        logid=fopen(logfile,'a')
# Trainmatlab.v.0/logit.m:82
        if logid > 0:
            fprintf(logid,'%s %-16s %s\\n',datestr(now),fname,logmsg)
            fclose(logid)
    
    if whereto == logical_or(0,whereto) == 2:
        fprintf('%s: %s\\n',fname,logmsg)
    
    if whereto == 3:
        logid=fopen(debugfile,'a')
# Trainmatlab.v.0/logit.m:94
        if logid > 0:
            fprintf(logid,'%s %-16s %s\\n',datestr(now),fname,logmsg)
            fclose(logid)
    